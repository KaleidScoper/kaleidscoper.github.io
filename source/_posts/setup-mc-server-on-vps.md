---
title: 使用VPS搭建MC服务器
date: 2024-10-02 18:24:55
categories: [游戏, 我的世界]
tags: []
---

## 一、租用云主机

租用云主机（VPS）用来搭建MC服务器有许多优点：

1. 24h开机。
2. 承载更多玩家。
3. 由于你拥有该VPS的完全操作权限，你可以使用同一台机器来搭建你的服务器官网、服务器在线地图、QQ群机器人等。专用的MC服务器托管服务商一般不会允许你架设网站，你的权限也受到严格限制。
4. 无需下载额外软件来管理服务器，你可以通过任何能联网的设备管理你的服务器。
5. 可以为你的服务器申请独具特色的域名。

<!--more-->

与之相伴的缺点：

1. 服务器所有问题只能自己解决，没有客服供你泄愤。
2. 大服务商太贵。
3. 小服务商会偷偷超开超售，而且主频也太低。
4. 国内VPS想开网站需要备案。
5. 国外VPS很卡。

在这里我们可以选择淘宝的国内云主机服务商，比如各种xx云。选择服务商时注意“是否有独立ipv4地址”。我建议选择一款4核4g的云主机即可，这是大概够五个人玩纯净生存的硬件配置。随着玩家的增加，不能无脑地增加核心数与内存，而是同时选择主频更高的服务器。

操作系统选择Ubuntu 22，太低的版本无法安装java 21，这是玩1.21.x我的世界的环境需求。

现在假设你现在租到了心仪的主机，得到了其公网ipv4地址、root密码。

## 二、使用云主机

拥有云主机后，请先进入服务商提供的控制台，复制保存一下此主机的IP地址、root登录密码，再检查一下硬件配置是否如付款时所声称的那样。接下来查看服务器安全组，注意检查以下几个<b>端口</b>（port）是否放开（即允许TCP入方向规则）：22（ssh端口）、80（http端口）、443（https端口）、25565（MC服务器默认端口）、23333和24444（管理面板端口）。如果没有可以手动添加：【允许所有ip（即0.0.0.0/0），入方向，自定义TCP，端口范围填写需要的端口】即可。

现在可以使用云主机了。我在[使用LAMP建WordPress博客站](https://testgames.me/2023/09/06/49/#3rd)中详细叙述了最简单的使用方法，如果你觉得太长懒得看，现在给出省流版：（以Tabby为例）

在Tabby等软件中新增一个ssh连接，填入ip地址、密码，选择保存并连接即可进入VPS的终端界面。

现在假设你已经通过Xshell、Tabby或者CMD连接到了你的VPS。

## 三、配置云主机环境

在VPS终端界面使用下面的命令更新软件包：

```Bash
apt update
```

安装Java 21：

```bash
apt install openjdk-21-jre -y
```

现在安装MCSmanager，这是一个图形化的管理面板，免去了繁琐的命令行操作：

```bash
sudo wget -qO- https://gitee.com/mcsmanager/script/raw/master/setup_cn.sh | sudo bash
```

现在依次执行每行命令，设置开机自启、启动MCSmanager：

```bash
systemctl enable mcsm-{daemon,web}.service

systemctl start mcsm-{daemon,web}.service
```

现在可以访问MCSManager面板了。浏览器打开http://你的VPS的公网IP:23333即可，这串链接的意思是通过端口23333（也就是管理面板所监听的端口）访问你的服务器，例如http://123.123.123.123:23333

现在假设你已经进入了服务器管理面板，并查看了新手教程。

## 四、配置MC服务器

MC官网给出了[官方Java版服务端](https://www.minecraft.net/en-us/download/server)，这个服务端是不能安装插件、Mod的。我们以这个服务端为例配置MC服务器。执行此命令下载：（建议自行前往官网下载最新版）

```bash
wget https://piston-data.mojang.com/v1/objects/59353fb40c36d304f2035d51e7d6e6baa98dc05c/server.jar
```

下载成功，你将得到一个server.jar文件。

现在前往服务器管理面板，在应用实例中创建一个新的实例，选择Java版服务端->上传单个服务器软件，将server.jar上传即可。

第一次启动实例成功后会自动关闭示例，并提示你未同意mojang的服务条款。现在前往实例配置文件，选择eula.txt进行配置（将是否同意修改为是）即可。如果你并不需要上传存档或者自定义世界种子，现在就可以回到控制台开启你的服务器了。

## 五、Q&A

<b>Q：</b>服务器存档和单机档互通吗？

<b>A：</b>分情况。各服务端的存档格式主要有两种：

1. 第一种格式：在存档文件夹（这个文件夹的名称就是存档名称，可能是world）里，有DIM1和DIM-1这两个文件夹，分别是维度1（也就是末地）和维度-1（也就是下界）的存档。这个格式是Minecraft客户端使用的格式，最近官方的服务端也开始使用这个格式了。
2. 第二种格式：存档分为三个文件夹，分别名为world（主世界）、world_the_end（末地）和world_nether（下界）。这是大多数第三方服务端在使用的格式。

将第一种格式里的两个维度文件夹剪切出来，重命名为第二种格式里对应的名称即可使用。使用管理面板的文件管理功能可以方便地上传、下载文件。

Q：如何更换服务器图标？

A：使用管理面板的文件管理功能，将你准备用来作为服务器图标的64*64的png图片，重命名为server-icon.png后，上传至服务器根目录即可。
