$wrap-width = convert(hexo-config('layout.article_width'))
$aside-width = convert(hexo-config('layout.sidebar_width'))
$mouse-url = convert(hexo-config('mouse.path'))

if hexo-config('mouse.enable')
    body
        cursor: url($mouse-url),auto;

.sidebar
    left - $aside-width
    width $aside-width
    &.on
        left 0
.content
    &.on
        margin-left 0 !important
.navbar-toggle
    left 1.5rem + $aside-width
.search-form-wrap
    right $aside-width

@media(min-width: 768px)
    .outer, .wrap
        width $wrap-width !important
@media(max-width: 768px)
    .tocbot
        display none !important
    .sidebar
        left 0
        &.on
            left - $aside-width
    .content
        transform translateX($aside-width)
        &.on
            transform translateX(0)

// 额外的代码高亮美化样式
.article-entry {
  // 代码块悬停效果
  pre, .highlight {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    
    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
  }
  
  // 代码块内行高优化
  pre code {
    line-height: 1.8;
    padding: 0.5em 0;
  }
  
  // 行内代码优化
  code {
    transition: all 0.2s ease;
    
    &:hover {
      background: rgba(175, 184, 193, 0.3);
      transform: scale(1.05);
    }
  }
}

// 代码块语言标签动画
.article-entry .highlight::before {
  transition: all 0.3s ease;
  transform: translateY(-2px);
  opacity: 0.9;
}

.article-entry .highlight:hover::before {
  transform: translateY(0);
  opacity: 1;
}

// 代码复制按钮增强
.btn-copy {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  
  &:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  &.copied {
    animation: copySuccess 0.6s ease;
  }
  
  &.copy-failed {
    animation: copyFailed 0.6s ease;
  }
}

// 复制成功动画
@keyframes copySuccess {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

// 复制失败动画
@keyframes copyFailed {
  0% { transform: scale(1); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
  100% { transform: scale(1); }
}

// 暗色模式下的额外样式
@media (prefers-color-scheme: dark) {
  .article-entry {
    pre, .highlight {
      &:hover {
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
      }
    }
    
    code {
      &:hover {
        background: rgba(255, 255, 255, 0.15);
      }
    }
  }
  
  .btn-copy {
    border-color: rgba(255, 255, 255, 0.1);
    
    &:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
  }
}

// 代码块滚动条美化
.article-entry pre::-webkit-scrollbar,
.article-entry .highlight::-webkit-scrollbar {
  transition: all 0.3s ease;
}

.article-entry pre:hover::-webkit-scrollbar,
.article-entry .highlight:hover::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

// 代码块选择文本样式
.article-entry pre::selection,
.article-entry .highlight::selection,
.article-entry pre *::selection,
.article-entry .highlight *::selection {
  background: rgba(86, 156, 214, 0.3);
  color: inherit;
}

// 代码块焦点样式
.article-entry pre:focus,
.article-entry .highlight:focus {
  outline: 2px solid rgba(86, 156, 214, 0.5);
  outline-offset: 2px;
}
