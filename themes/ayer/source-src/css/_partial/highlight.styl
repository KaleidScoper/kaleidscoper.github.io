// 现代化代码高亮配色方案
// 基于示例文件的优雅设计理念

// 主题变量
highlight-bg = #2d2d2d
highlight-text = #ccc
highlight-side-bg = rgba(255, 255, 255, 0.05)
highlight-side-text = #ccc
highlight-side-border = rgba(255, 255, 255, 0.075)
highlight-scrollbar-track = rgba(255, 255, 255, 0.1)
highlight-scrollbar-thumb = rgba(255, 255, 255, 0.5)
highlight-button-bg = rgba(255, 255, 255, 0.1)
highlight-button-text = rgba(255, 255, 255, 0.5)

// 语法高亮颜色
highlight-comment = #6a9955
highlight-keyword = #569cd6
highlight-string = #ce9178
highlight-number = #b5cea8
highlight-function = #dcdcaa
highlight-class = #4ec9b0
highlight-variable = #9cdcfe
highlight-operator = #d4d4d4
highlight-punctuation = #d4d4d4
highlight-tag = #569cd6
highlight-attribute = #9cdcfe
highlight-property = #9cdcfe
highlight-value = #ce9178
highlight-selector = #d7ba7d
highlight-regex = #d16969

// 基础代码块样式
.article-entry pre,
.article-entry .highlight {
  position: relative
  background: highlight-bg
  color: highlight-text
  border-radius: 8px
  margin: 20px 0
  overflow: hidden
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15)
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace
  font-size: 14px
  line-height: 1.5
  tab-size: 4
  
  // 悬停效果
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1)
  
  &:hover {
    transform: translateY(-2px)
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25)
  }
}

// 代码块头部
.article-entry .highlight::before {
  content: attr(data-lang)
  position: absolute
  top: 0
  left: 0
  right: 0
  padding: 8px 16px
  background: rgba(0, 0, 0, 0.2)
  color: highlight-text
  font-size: 12px
  font-weight: 500
  text-transform: uppercase
  letter-spacing: 0.5px
  border-bottom: 1px solid highlight-side-border
  z-index: 1
}

// 代码内容区域
.article-entry .highlight pre {
  margin: 0
  padding: 0
  background: none
  border: none
  position: relative
  padding-top: 40px // 为头部留出空间
}

// 行号容器
.article-entry .highlight .gutter {
  position: absolute
  left: 0
  top: 40px // 为头部留出空间
  width: 50px
  height: calc(100% - 40px)
  background: highlight-side-bg
  border-right: 2px solid highlight-side-border
  z-index: 1
}

// 行号样式
.article-entry .highlight .gutter pre {
  padding: 0
  margin: 0
  background: none
  border: none
  counter-reset: lineNumber
  text-align: right
  padding-right: 16px
  user-select: none
}

.article-entry .highlight .gutter pre .line {
  position: relative
  min-height: 24px
  line-height: 24px
  color: highlight-side-text
  font-size: 12px
  
  &::before {
    position: absolute
    width: 32px
    left: -32px
    text-align: right
    counter-increment: lineNumber 1
    content: counter(lineNumber)
    color: highlight-side-text
    opacity: 0.6
  }
}

// 代码内容
.article-entry .highlight .code {
  margin-left: 50px
  padding: 16px
  overflow-x: auto
  
  pre {
    padding: 0
    margin: 0
    background: none
    border: none
    padding-top: 0
  }
  
  .line {
    position: relative
    min-height: 24px
    line-height: 24px
    padding: 0 8px
    border-radius: 4px
    transition: background-color 0.2s ease
    
    &:hover {
      background: rgba(255, 255, 255, 0.05)
    }
  }
}

// 语法高亮颜色
.article-entry .highlight {
  .comment {
    color: highlight-comment
    font-style: italic
  }
  
  .keyword {
    color: highlight-keyword
    font-weight: 600
  }
  
  .string {
    color: highlight-string
  }
  
  .number {
    color: highlight-number
  }
  
  .function {
    color: highlight-function
  }
  
  .class {
    color: highlight-class
  }
  
  .variable {
    color: highlight-variable
  }
  
  .operator {
    color: highlight-operator
  }
  
  .punctuation {
    color: highlight-punctuation
  }
  
  .tag {
    color: highlight-tag
  }
  
  .attribute {
    color: highlight-attribute
  }
  
  .property {
    color: highlight-property
  }
  
  .value {
    color: highlight-value
  }
  
  .selector {
    color: highlight-selector
  }
  
  .regex {
    color: highlight-regex
  }
}

// 代码复制按钮
.btn-copy {
  position: absolute
  top: 8px
  right: 8px
  background: highlight-button-bg
  color: highlight-button-text
  border: none
  border-radius: 4px
  padding: 6px 12px
  font-size: 12px
  cursor: pointer
  transition: all 0.2s ease
  z-index: 2
  
  &:hover {
    background: rgba(255, 255, 255, 0.2)
    color: highlight-text
    transform: scale(1.05)
  }
  
  &.copied {
    background: #28a745
    color: white
    animation: copySuccess 0.6s ease
  }
  
  &.copy-failed {
    background: #dc3545
    color: white
    animation: copyFailed 0.6s ease
  }
}

// 复制动画
@keyframes copySuccess {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

@keyframes copyFailed {
  0% { transform: scale(1); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
  100% { transform: scale(1); }
}

// 滚动条样式
.article-entry .highlight::-webkit-scrollbar {
  height: 8px
  width: 8px
}

.article-entry .highlight::-webkit-scrollbar-track {
  background: highlight-scrollbar-track
  border-radius: 4px
}

.article-entry .highlight::-webkit-scrollbar-thumb {
  background: highlight-scrollbar-thumb
  border-radius: 4px
  
  &:hover {
    background: rgba(255, 255, 255, 0.7)
  }
}

// 行内代码样式
.article-entry code {
  background: rgba(175, 184, 193, 0.2)
  color: #24292e
  padding: 0.2em 0.4em
  border-radius: 4px
  font-size: 0.85em
  border: 1px solid rgba(175, 184, 193, 0.3)
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace
  transition: all 0.2s ease
  
  &:hover {
    background: rgba(175, 184, 193, 0.3)
    transform: scale(1.05)
  }
}

// 代码块内的行内代码
.article-entry pre code {
  background: none
  color: inherit
  padding: 0
  border: none
  border-radius: 0
  font-size: inherit
  
  &:hover {
    background: none
    transform: none
  }
}

// 文本选择样式
.article-entry .highlight::selection,
.article-entry .highlight *::selection {
  background: rgba(86, 156, 214, 0.3)
  color: inherit
}

// 响应式设计
@media (max-width: 768px) {
  .article-entry .highlight {
    margin: 16px 0
    font-size: 13px
    
    &::before {
      font-size: 11px
      padding: 6px 12px
    }
    
    .gutter {
      width: 40px
    }
    
    .code {
      margin-left: 40px
      padding: 12px
    }
    
    .gutter pre .line::before {
      width: 24px
      left: -24px
      font-size: 11px
    }
  }
  
  .btn-copy {
    position: relative
    top: auto
    right: auto
    margin: 8px
    opacity: 1
  }
}

// 暗色模式支持
@media (prefers-color-scheme: dark) {
  .article-entry code {
    background: rgba(255, 255, 255, 0.1)
    color: highlight-text
    border-color: rgba(255, 255, 255, 0.2)
    
    &:hover {
      background: rgba(255, 255, 255, 0.15)
    }
  }
}
