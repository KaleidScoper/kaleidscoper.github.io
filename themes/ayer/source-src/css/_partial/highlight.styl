// 现代代码高亮配色方案
// 结合GitHub和VSCode的设计理念

// 浅色主题变量
highlight-background-light = #f8f9fa
highlight-border-light = #e1e4e8
highlight-code-light = #24292e
highlight-current-line-light = #f1f3f4
highlight-selection-light = #c8e6c9

// 暗色主题变量
highlight-background-dark = #1e1e1e
highlight-border-dark = #3c3c3c
highlight-code-dark = #d4d4d4
highlight-current-line-dark = #2d2d30
highlight-selection-dark = #264f78

// 语法高亮颜色（基于VSCode Dark+主题）
highlight-keyword = #569cd6      // 关键字：蓝色
highlight-string = #ce9178       // 字符串：橙色
highlight-number = #b5cea8       // 数字：浅绿
highlight-comment = #6a9955      // 注释：绿色
highlight-function = #dcdcaa     // 函数：黄色
highlight-class = #4ec9b0       // 类：青色
highlight-variable = #9cdcfe     // 变量：浅蓝
highlight-operator = #d4d4d4     // 操作符：白色
highlight-punctuation = #d4d4d4  // 标点：白色

// 基础样式
.article-entry pre,
.article-entry .highlight {
  background: highlight-background-light
  border: 1px solid highlight-border-light
  border-radius: 8px
  margin: 16px 0
  padding: 16px
  overflow: hidden
  overflow-x: auto
  color: highlight-code-light
  font-size: 0.9em
  line-height: 1.6
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1)
  transition: all 0.3s ease

  &:hover {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15)
    transform: translateY(-1px)
  }

  // 滚动条样式
  &::-webkit-scrollbar {
    height: 8px
    width: 8px
    background: transparent
  }

  &::-webkit-scrollbar:hover {
    background: rgba(0, 0, 0, 0.1)
  }

  &::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2)
    border-radius: 4px
    
    &:hover {
      background: rgba(0, 0, 0, 0.3)
    }
  }

  &::-webkit-scrollbar-track {
    background: transparent
    border-radius: 4px
  }
}

// 行号样式
.article-entry .highlight .gutter pre,
.article-entry .highlight .gutter pre .line,
.article-entry .gist .gist-file .gist-data .line-numbers {
  color: highlight-current-line-light
  background: rgba(0, 0, 0, 0.02)
  border-right: 1px solid highlight-border-light
  padding-right: 16px
  margin-right: 16px
  text-align: right
  user-select: none
}

// 代码字体
.article-entry pre,
.article-entry code {
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace
  font-feature-settings: 'liga' 1, 'calt' 1
  text-rendering: optimizeLegibility
}

// 行内代码样式
.article-entry code {
  background: rgba(175, 184, 193, 0.2)
  color: highlight-code-light
  padding: 0.2em 0.4em
  border-radius: 4px
  font-size: 0.85em
  border: 1px solid rgba(175, 184, 193, 0.3)
}

// 代码块内的代码
.article-entry pre code {
  background: none
  color: inherit
  padding: 0
  border: none
  border-radius: 0
  font-size: inherit
}

// 代码块容器
.article-entry .highlight {
  position: relative
  
  // 语言标签
  &::before {
    content: attr(data-lang)
    position: absolute
    top: 0
    right: 16px
    background: highlight-keyword
    color: white
    padding: 4px 8px
    font-size: 0.75em
    border-radius: 0 8px 0 4px
    font-weight: 500
    text-transform: uppercase
    letter-spacing: 0.5px
  }
}

// 语法高亮颜色
pre .comment {
  color: highlight-comment
  font-style: italic
}

pre .keyword,
pre .function .keyword,
pre .class .params {
  color: highlight-keyword
  font-weight: 600
}

pre .tag,
pre .doctype,
pre .params,
pre .function,
pre .css .value {
  color: highlight-function
}

pre .css~* .tag,
pre .title,
pre .at_rule,
pre .at_rule .keyword,
pre .preprocessor,
pre .preprocessor .keyword {
  color: highlight-keyword
}

pre .attribute,
pre .built_in,
pre .class,
pre .css~* .class,
pre .function .title {
  color: highlight-class
}

pre .value,
pre .string {
  color: highlight-string
}

pre .number {
  color: highlight-number
}

pre .id,
pre .css~* .id {
  color: highlight-variable
}

pre .operator {
  color: highlight-operator
}

pre .punctuation {
  color: highlight-punctuation
}

// 暗色模式支持
@media (prefers-color-scheme: dark) {
  .article-entry pre,
  .article-entry .highlight {
    background: highlight-background-dark
    border-color: highlight-border-dark
    color: highlight-code-dark
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3)
    
    &:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4)
    }
  }
  
  .article-entry code {
    background: rgba(255, 255, 255, 0.1)
    color: highlight-code-dark
    border-color: rgba(255, 255, 255, 0.2)
  }
  
  .article-entry .highlight .gutter pre,
  .article-entry .highlight .gutter pre .line {
    background: rgba(255, 255, 255, 0.05)
    border-color: highlight-border-dark
    color: rgba(255, 255, 255, 0.6)
  }
}

// 代码复制按钮样式
.btn-copy {
  position: absolute
  top: 8px
  right: 8px
  background: rgba(0, 0, 0, 0.1)
  color: #666
  border: none
  border-radius: 4px
  padding: 4px 8px
  font-size: 0.75em
  cursor: pointer
  transition: all 0.2s ease
  opacity: 0
  
  &:hover {
    background: rgba(0, 0, 0, 0.2)
    color: #333
  }
  
  &.copied {
    background: #28a745
    color: white
  }
  
  &.copy-failed {
    background: #dc3545
    color: white
  }
}

.article-entry .highlight:hover .btn-copy,
.article-entry pre:hover .btn-copy {
  opacity: 1
}

// 代码块标题
.article-entry .highlight figcaption {
  color: highlight-comment
  line-height: 1em
  margin-bottom: 1em
  font-size: 0.85em
  font-weight: 500
  
  &:before,
  &:after {
    content: ""
    display: table
  }
  
  &:after {
    clear: both
  }
  
  a {
    float: right
    color: highlight-keyword
    text-decoration: none
    
    &:hover {
      text-decoration: underline
    }
  }
}

// 响应式设计
@media (max-width: 768px) {
  .article-entry pre,
  .article-entry .highlight {
    margin: 12px 0
    padding: 12px
    font-size: 0.8em
    
    &::before {
      font-size: 0.7em
      padding: 2px 6px
    }
  }
  
  .btn-copy {
    position: relative
    top: auto
    right: auto
    margin-bottom: 8px
    opacity: 1
  }
}
