// 简洁实用的代码高亮样式
// 设计理念：简洁、清晰、不干扰阅读

// 基础变量
highlight-bg = #f6f8fa
highlight-border = #e1e4e8
highlight-text = #24292e
highlight-line-bg = #f1f3f4
highlight-line-border = #e1e4e8

// 语法高亮颜色（GitHub风格）
highlight-keyword = #d73a49
highlight-string = #032f62
highlight-number = #005cc5
highlight-comment = #6a737d
highlight-function = #6f42c1
highlight-class = #e36209
highlight-variable = #24292e
highlight-operator = #24292e
highlight-punctuation = #24292e

// 基础代码块样式
.article-entry pre,
.article-entry .highlight {
  background: highlight-bg
  border: 1px solid highlight-border
  border-radius: 6px
  margin: 16px 0
  overflow: hidden
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace
  font-size: 13px
  line-height: 1.45
  tab-size: 4
}

// 代码内容
.article-entry .highlight pre {
  margin: 0
  padding: 16px
  background: none
  border: none
  overflow-x: auto
}

// 行号容器
.article-entry .highlight .gutter {
  float: left
  width: 50px
  background: highlight-line-bg
  border-right: 1px solid highlight-line-border
  text-align: right
  padding: 16px 8px 16px 0
  margin-right: 16px
  user-select: none
}

// 行号样式
.article-entry .highlight .gutter pre {
  padding: 0
  margin: 0
  background: none
  border: none
  counter-reset: lineNumber
}

.article-entry .highlight .gutter pre .line {
  position: relative
  min-height: 20px
  line-height: 20px
  color: #6a737d
  font-size: 12px
  
  &::before {
    position: absolute
    width: 32px
    left: -32px
    text-align: right
    counter-increment: lineNumber 1
    content: counter(lineNumber)
    color: #6a737d
  }
}

// 代码内容区域
.article-entry .highlight .code {
  overflow: hidden
  padding: 16px 16px 16px 0
  
  pre {
    padding: 0
    margin: 0
    background: none
    border: none
  }
  
  .line {
    position: relative
    min-height: 20px
    line-height: 20px
    padding: 0 8px
  }
}

// 语法高亮颜色
.article-entry .highlight {
  .comment {
    color: highlight-comment
    font-style: italic
  }
  
  .keyword {
    color: highlight-keyword
    font-weight: 600
  }
  
  .string {
    color: highlight-string
  }
  
  .number {
    color: highlight-number
  }
  
  .function {
    color: highlight-function
  }
  
  .class {
    color: highlight-class
  }
  
  .variable {
    color: highlight-variable
  }
  
  .operator {
    color: highlight-operator
  }
  
  .punctuation {
    color: highlight-punctuation
  }
}

// 代码复制按钮
.btn-copy {
  position: absolute
  top: 8px
  right: 8px
  background: #fff
  color: #586069
  border: 1px solid #d1d5da
  border-radius: 3px
  padding: 4px 8px
  font-size: 11px
  cursor: pointer
  transition: all 0.2s ease
  z-index: 2
  
  &:hover {
    background: #f3f4f6
    border-color: #d1d5da
  }
  
  &.copied {
    background: #28a745
    color: white
    border-color: #28a745
  }
  
  &.copy-failed {
    background: #dc3545
    color: white
    border-color: #dc3545
  }
}

// 滚动条样式
.article-entry .highlight::-webkit-scrollbar {
  height: 6px
  width: 6px
}

.article-entry .highlight::-webkit-scrollbar-track {
  background: #f1f3f4
  border-radius: 3px
}

.article-entry .highlight::-webkit-scrollbar-thumb {
  background: #d1d5da
  border-radius: 3px
  
  &:hover {
    background: #959da5
  }
}

// 行内代码样式
.article-entry code {
  background: #f6f8fa
  color: #e36209
  padding: 0.2em 0.4em
  border-radius: 3px
  font-size: 0.85em
  border: 1px solid #e1e4e8
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace
}

// 代码块内的行内代码
.article-entry pre code {
  background: none
  color: inherit
  padding: 0
  border: none
  border-radius: 0
  font-size: inherit
}

// 文本选择样式
.article-entry .highlight::selection,
.article-entry .highlight *::selection {
  background: #c8e6c9
  color: inherit
}

// 响应式设计
@media (max-width: 768px) {
  .article-entry .highlight {
    margin: 12px 0
    font-size: 12px
    
    .gutter {
      width: 40px
      padding: 12px 6px 12px 0
      margin-right: 12px
    }
    
    .code {
      padding: 12px 12px 12px 0
    }
    
    .gutter pre .line::before {
      width: 24px
      left: -24px
      font-size: 11px
    }
  }
  
  .btn-copy {
    position: relative
    top: auto
    right: auto
    margin: 8px
    opacity: 1
  }
}

// 暗色模式支持
@media (prefers-color-scheme: dark) {
  .article-entry .highlight {
    background: #0d1117
    border-color: #30363d
    color: #c9d1d9
    
    .gutter {
      background: #161b22
      border-color: #30363d
    }
    
    .gutter pre .line::before {
      color: #8b949e
    }
  }
  
  .article-entry code {
    background: #161b22
    color: #79c0ff
    border-color: #30363d
  }
  
  .btn-copy {
    background: #21262d
    color: #c9d1d9
    border-color: #30363d
    
    &:hover {
      background: #30363d
    }
  }
  
  .article-entry .highlight::-webkit-scrollbar-track {
    background: #161b22
  }
  
  .article-entry .highlight::-webkit-scrollbar-thumb {
    background: #30363d
    
    &:hover {
      background: #484f58
    }
  }
}
